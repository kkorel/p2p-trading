"use strict";
/**
 * SQLite Database Schema for P2P Energy Trading
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.SCHEMA = void 0;
exports.initializeSchema = initializeSchema;
exports.SCHEMA = {
    // Providers table - tracks BPP trust scores
    providers: `
    CREATE TABLE IF NOT EXISTS providers (
      id TEXT PRIMARY KEY,
      name TEXT NOT NULL,
      trust_score REAL DEFAULT 0.5,
      total_orders INTEGER DEFAULT 0,
      successful_orders INTEGER DEFAULT 0,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )
  `,
    // Catalog items table
    catalog_items: `
    CREATE TABLE IF NOT EXISTS catalog_items (
      id TEXT PRIMARY KEY,
      provider_id TEXT NOT NULL,
      source_type TEXT NOT NULL,
      delivery_mode TEXT NOT NULL,
      available_qty REAL NOT NULL,
      meter_id TEXT,
      production_windows_json TEXT NOT NULL,
      raw_json TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (provider_id) REFERENCES providers(id)
    )
  `,
    // Catalog offers table
    catalog_offers: `
    CREATE TABLE IF NOT EXISTS catalog_offers (
      id TEXT PRIMARY KEY,
      item_id TEXT NOT NULL,
      provider_id TEXT NOT NULL,
      price_value REAL NOT NULL,
      currency TEXT NOT NULL,
      max_qty REAL NOT NULL,
      time_window_json TEXT NOT NULL,
      offer_attributes_json TEXT NOT NULL,
      raw_json TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (item_id) REFERENCES catalog_items(id),
      FOREIGN KEY (provider_id) REFERENCES providers(id)
    )
  `,
    // Orders table
    orders: `
    CREATE TABLE IF NOT EXISTS orders (
      id TEXT PRIMARY KEY,
      transaction_id TEXT UNIQUE NOT NULL,
      status TEXT NOT NULL DEFAULT 'DRAFT',
      provider_id TEXT,
      selected_offer_id TEXT,
      total_qty REAL,
      total_price REAL,
      currency TEXT,
      raw_json TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (provider_id) REFERENCES providers(id),
      FOREIGN KEY (selected_offer_id) REFERENCES catalog_offers(id)
    )
  `,
    // Events table for logging
    events: `
    CREATE TABLE IF NOT EXISTS events (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      transaction_id TEXT NOT NULL,
      message_id TEXT NOT NULL,
      action TEXT NOT NULL,
      direction TEXT NOT NULL CHECK(direction IN ('OUTBOUND', 'INBOUND')),
      raw_json TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )
  `,
    // Offer blocks table - represents individual 1-unit blocks for granular trading
    offer_blocks: `
    CREATE TABLE IF NOT EXISTS offer_blocks (
      id TEXT PRIMARY KEY,
      offer_id TEXT NOT NULL,
      item_id TEXT NOT NULL,
      provider_id TEXT NOT NULL,
      status TEXT NOT NULL DEFAULT 'AVAILABLE' CHECK(status IN ('AVAILABLE', 'RESERVED', 'SOLD')),
      order_id TEXT,
      transaction_id TEXT,
      price_value REAL NOT NULL,
      currency TEXT NOT NULL,
      time_window_json TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      reserved_at DATETIME,
      sold_at DATETIME,
      FOREIGN KEY (offer_id) REFERENCES catalog_offers(id),
      FOREIGN KEY (item_id) REFERENCES catalog_items(id),
      FOREIGN KEY (provider_id) REFERENCES providers(id),
      FOREIGN KEY (order_id) REFERENCES orders(id)
    )
  `,
    // Settlement records - manual escrow flow (Phase 4)
    settlement_records: `
    CREATE TABLE IF NOT EXISTS settlement_records (
      trade_id TEXT PRIMARY KEY,
      order_id TEXT,
      transaction_id TEXT,
      buyer_id TEXT,
      seller_id TEXT,
      principal REAL NOT NULL,
      fee REAL NOT NULL,
      total REAL NOT NULL,
      expires_at DATETIME NOT NULL,
      status TEXT NOT NULL,
      verification_outcome TEXT,
      funded_receipt TEXT,
      payout_receipt TEXT,
      funded_at DATETIME,
      verified_at DATETIME,
      payout_at DATETIME,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )
  `,
    // Index for faster event lookups
    events_index: `
    CREATE INDEX IF NOT EXISTS idx_events_transaction_id ON events(transaction_id)
  `,
    events_message_index: `
    CREATE INDEX IF NOT EXISTS idx_events_message_id ON events(message_id)
  `,
    // Indexes for offer blocks
    blocks_offer_index: `
    CREATE INDEX IF NOT EXISTS idx_blocks_offer_id ON offer_blocks(offer_id)
  `,
    blocks_status_index: `
    CREATE INDEX IF NOT EXISTS idx_blocks_status ON offer_blocks(offer_id, status)
  `,
    settlement_trade_index: `
    CREATE INDEX IF NOT EXISTS idx_settlement_trade_id ON settlement_records(trade_id)
  `,
};
/**
 * Initialize database with all tables (works with sql.js)
 */
function initializeSchema(db) {
    db.run(exports.SCHEMA.providers);
    db.run(exports.SCHEMA.catalog_items);
    db.run(exports.SCHEMA.catalog_offers);
    db.run(exports.SCHEMA.orders);
    db.run(exports.SCHEMA.events);
    db.run(exports.SCHEMA.offer_blocks);
    db.run(exports.SCHEMA.settlement_records);
    db.run(exports.SCHEMA.events_index);
    db.run(exports.SCHEMA.events_message_index);
    db.run(exports.SCHEMA.blocks_offer_index);
    db.run(exports.SCHEMA.blocks_status_index);
    db.run(exports.SCHEMA.settlement_trade_index);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2NoZW1hLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7O0FBMkpILDRDQWFDO0FBdEtZLFFBQUEsTUFBTSxHQUFHO0lBQ3BCLDRDQUE0QztJQUM1QyxTQUFTLEVBQUU7Ozs7Ozs7Ozs7R0FVVjtJQUVELHNCQUFzQjtJQUN0QixhQUFhLEVBQUU7Ozs7Ozs7Ozs7Ozs7R0FhZDtJQUVELHVCQUF1QjtJQUN2QixjQUFjLEVBQUU7Ozs7Ozs7Ozs7Ozs7OztHQWVmO0lBRUQsZUFBZTtJQUNmLE1BQU0sRUFBRTs7Ozs7Ozs7Ozs7Ozs7OztHQWdCUDtJQUVELDJCQUEyQjtJQUMzQixNQUFNLEVBQUU7Ozs7Ozs7Ozs7R0FVUDtJQUVELGdGQUFnRjtJQUNoRixZQUFZLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBb0JiO0lBRUQsb0RBQW9EO0lBQ3BELGtCQUFrQixFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQm5CO0lBRUQsaUNBQWlDO0lBQ2pDLFlBQVksRUFBRTs7R0FFYjtJQUVELG9CQUFvQixFQUFFOztHQUVyQjtJQUVELDJCQUEyQjtJQUMzQixrQkFBa0IsRUFBRTs7R0FFbkI7SUFFRCxtQkFBbUIsRUFBRTs7R0FFcEI7SUFFRCxzQkFBc0IsRUFBRTs7R0FFdkI7Q0FDRixDQUFDO0FBRUY7O0dBRUc7QUFDSCxTQUFnQixnQkFBZ0IsQ0FBQyxFQUFPO0lBQ3RDLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3pCLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzdCLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzlCLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RCLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RCLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDbEMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUNwQyxFQUFFLENBQUMsR0FBRyxDQUFDLGNBQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xDLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDbkMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUN4QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTUUxpdGUgRGF0YWJhc2UgU2NoZW1hIGZvciBQMlAgRW5lcmd5IFRyYWRpbmdcbiAqL1xuXG5leHBvcnQgY29uc3QgU0NIRU1BID0ge1xuICAvLyBQcm92aWRlcnMgdGFibGUgLSB0cmFja3MgQlBQIHRydXN0IHNjb3Jlc1xuICBwcm92aWRlcnM6IGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcm92aWRlcnMgKFxuICAgICAgaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICAgIG5hbWUgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHRydXN0X3Njb3JlIFJFQUwgREVGQVVMVCAwLjUsXG4gICAgICB0b3RhbF9vcmRlcnMgSU5URUdFUiBERUZBVUxUIDAsXG4gICAgICBzdWNjZXNzZnVsX29yZGVycyBJTlRFR0VSIERFRkFVTFQgMCxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgIHVwZGF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgIClcbiAgYCxcbiAgXG4gIC8vIENhdGFsb2cgaXRlbXMgdGFibGVcbiAgY2F0YWxvZ19pdGVtczogYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhdGFsb2dfaXRlbXMgKFxuICAgICAgaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICAgIHByb3ZpZGVyX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgICBzb3VyY2VfdHlwZSBURVhUIE5PVCBOVUxMLFxuICAgICAgZGVsaXZlcnlfbW9kZSBURVhUIE5PVCBOVUxMLFxuICAgICAgYXZhaWxhYmxlX3F0eSBSRUFMIE5PVCBOVUxMLFxuICAgICAgbWV0ZXJfaWQgVEVYVCxcbiAgICAgIHByb2R1Y3Rpb25fd2luZG93c19qc29uIFRFWFQgTk9UIE5VTEwsXG4gICAgICByYXdfanNvbiBURVhUIE5PVCBOVUxMLFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgRk9SRUlHTiBLRVkgKHByb3ZpZGVyX2lkKSBSRUZFUkVOQ0VTIHByb3ZpZGVycyhpZClcbiAgICApXG4gIGAsXG4gIFxuICAvLyBDYXRhbG9nIG9mZmVycyB0YWJsZVxuICBjYXRhbG9nX29mZmVyczogYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhdGFsb2dfb2ZmZXJzIChcbiAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgICBpdGVtX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgICBwcm92aWRlcl9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgcHJpY2VfdmFsdWUgUkVBTCBOT1QgTlVMTCxcbiAgICAgIGN1cnJlbmN5IFRFWFQgTk9UIE5VTEwsXG4gICAgICBtYXhfcXR5IFJFQUwgTk9UIE5VTEwsXG4gICAgICB0aW1lX3dpbmRvd19qc29uIFRFWFQgTk9UIE5VTEwsXG4gICAgICBvZmZlcl9hdHRyaWJ1dGVzX2pzb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgIHJhd19qc29uIFRFWFQgTk9UIE5VTEwsXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICBGT1JFSUdOIEtFWSAoaXRlbV9pZCkgUkVGRVJFTkNFUyBjYXRhbG9nX2l0ZW1zKGlkKSxcbiAgICAgIEZPUkVJR04gS0VZIChwcm92aWRlcl9pZCkgUkVGRVJFTkNFUyBwcm92aWRlcnMoaWQpXG4gICAgKVxuICBgLFxuICBcbiAgLy8gT3JkZXJzIHRhYmxlXG4gIG9yZGVyczogYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgdHJhbnNhY3Rpb25faWQgVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdEUkFGVCcsXG4gICAgICBwcm92aWRlcl9pZCBURVhULFxuICAgICAgc2VsZWN0ZWRfb2ZmZXJfaWQgVEVYVCxcbiAgICAgIHRvdGFsX3F0eSBSRUFMLFxuICAgICAgdG90YWxfcHJpY2UgUkVBTCxcbiAgICAgIGN1cnJlbmN5IFRFWFQsXG4gICAgICByYXdfanNvbiBURVhUIE5PVCBOVUxMLFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgdXBkYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgRk9SRUlHTiBLRVkgKHByb3ZpZGVyX2lkKSBSRUZFUkVOQ0VTIHByb3ZpZGVycyhpZCksXG4gICAgICBGT1JFSUdOIEtFWSAoc2VsZWN0ZWRfb2ZmZXJfaWQpIFJFRkVSRU5DRVMgY2F0YWxvZ19vZmZlcnMoaWQpXG4gICAgKVxuICBgLFxuICBcbiAgLy8gRXZlbnRzIHRhYmxlIGZvciBsb2dnaW5nXG4gIGV2ZW50czogYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGV2ZW50cyAoXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICB0cmFuc2FjdGlvbl9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgbWVzc2FnZV9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgYWN0aW9uIFRFWFQgTk9UIE5VTEwsXG4gICAgICBkaXJlY3Rpb24gVEVYVCBOT1QgTlVMTCBDSEVDSyhkaXJlY3Rpb24gSU4gKCdPVVRCT1VORCcsICdJTkJPVU5EJykpLFxuICAgICAgcmF3X2pzb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgIClcbiAgYCxcbiAgXG4gIC8vIE9mZmVyIGJsb2NrcyB0YWJsZSAtIHJlcHJlc2VudHMgaW5kaXZpZHVhbCAxLXVuaXQgYmxvY2tzIGZvciBncmFudWxhciB0cmFkaW5nXG4gIG9mZmVyX2Jsb2NrczogYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9mZmVyX2Jsb2NrcyAoXG4gICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgb2ZmZXJfaWQgVEVYVCBOT1QgTlVMTCxcbiAgICAgIGl0ZW1faWQgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHByb3ZpZGVyX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdBVkFJTEFCTEUnIENIRUNLKHN0YXR1cyBJTiAoJ0FWQUlMQUJMRScsICdSRVNFUlZFRCcsICdTT0xEJykpLFxuICAgICAgb3JkZXJfaWQgVEVYVCxcbiAgICAgIHRyYW5zYWN0aW9uX2lkIFRFWFQsXG4gICAgICBwcmljZV92YWx1ZSBSRUFMIE5PVCBOVUxMLFxuICAgICAgY3VycmVuY3kgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHRpbWVfd2luZG93X2pzb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgIHJlc2VydmVkX2F0IERBVEVUSU1FLFxuICAgICAgc29sZF9hdCBEQVRFVElNRSxcbiAgICAgIEZPUkVJR04gS0VZIChvZmZlcl9pZCkgUkVGRVJFTkNFUyBjYXRhbG9nX29mZmVycyhpZCksXG4gICAgICBGT1JFSUdOIEtFWSAoaXRlbV9pZCkgUkVGRVJFTkNFUyBjYXRhbG9nX2l0ZW1zKGlkKSxcbiAgICAgIEZPUkVJR04gS0VZIChwcm92aWRlcl9pZCkgUkVGRVJFTkNFUyBwcm92aWRlcnMoaWQpLFxuICAgICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZClcbiAgICApXG4gIGAsXG5cbiAgLy8gU2V0dGxlbWVudCByZWNvcmRzIC0gbWFudWFsIGVzY3JvdyBmbG93IChQaGFzZSA0KVxuICBzZXR0bGVtZW50X3JlY29yZHM6IGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzZXR0bGVtZW50X3JlY29yZHMgKFxuICAgICAgdHJhZGVfaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICAgIG9yZGVyX2lkIFRFWFQsXG4gICAgICB0cmFuc2FjdGlvbl9pZCBURVhULFxuICAgICAgYnV5ZXJfaWQgVEVYVCxcbiAgICAgIHNlbGxlcl9pZCBURVhULFxuICAgICAgcHJpbmNpcGFsIFJFQUwgTk9UIE5VTEwsXG4gICAgICBmZWUgUkVBTCBOT1QgTlVMTCxcbiAgICAgIHRvdGFsIFJFQUwgTk9UIE5VTEwsXG4gICAgICBleHBpcmVzX2F0IERBVEVUSU1FIE5PVCBOVUxMLFxuICAgICAgc3RhdHVzIFRFWFQgTk9UIE5VTEwsXG4gICAgICB2ZXJpZmljYXRpb25fb3V0Y29tZSBURVhULFxuICAgICAgZnVuZGVkX3JlY2VpcHQgVEVYVCxcbiAgICAgIHBheW91dF9yZWNlaXB0IFRFWFQsXG4gICAgICBmdW5kZWRfYXQgREFURVRJTUUsXG4gICAgICB2ZXJpZmllZF9hdCBEQVRFVElNRSxcbiAgICAgIHBheW91dF9hdCBEQVRFVElNRSxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgIHVwZGF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgIClcbiAgYCxcbiAgXG4gIC8vIEluZGV4IGZvciBmYXN0ZXIgZXZlbnQgbG9va3Vwc1xuICBldmVudHNfaW5kZXg6IGBcbiAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfZXZlbnRzX3RyYW5zYWN0aW9uX2lkIE9OIGV2ZW50cyh0cmFuc2FjdGlvbl9pZClcbiAgYCxcbiAgXG4gIGV2ZW50c19tZXNzYWdlX2luZGV4OiBgXG4gICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2V2ZW50c19tZXNzYWdlX2lkIE9OIGV2ZW50cyhtZXNzYWdlX2lkKVxuICBgLFxuICBcbiAgLy8gSW5kZXhlcyBmb3Igb2ZmZXIgYmxvY2tzXG4gIGJsb2Nrc19vZmZlcl9pbmRleDogYFxuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9ibG9ja3Nfb2ZmZXJfaWQgT04gb2ZmZXJfYmxvY2tzKG9mZmVyX2lkKVxuICBgLFxuICBcbiAgYmxvY2tzX3N0YXR1c19pbmRleDogYFxuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9ibG9ja3Nfc3RhdHVzIE9OIG9mZmVyX2Jsb2NrcyhvZmZlcl9pZCwgc3RhdHVzKVxuICBgLFxuICBcbiAgc2V0dGxlbWVudF90cmFkZV9pbmRleDogYFxuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9zZXR0bGVtZW50X3RyYWRlX2lkIE9OIHNldHRsZW1lbnRfcmVjb3Jkcyh0cmFkZV9pZClcbiAgYCxcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBkYXRhYmFzZSB3aXRoIGFsbCB0YWJsZXMgKHdvcmtzIHdpdGggc3FsLmpzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVNjaGVtYShkYjogYW55KTogdm9pZCB7XG4gIGRiLnJ1bihTQ0hFTUEucHJvdmlkZXJzKTtcbiAgZGIucnVuKFNDSEVNQS5jYXRhbG9nX2l0ZW1zKTtcbiAgZGIucnVuKFNDSEVNQS5jYXRhbG9nX29mZmVycyk7XG4gIGRiLnJ1bihTQ0hFTUEub3JkZXJzKTtcbiAgZGIucnVuKFNDSEVNQS5ldmVudHMpO1xuICBkYi5ydW4oU0NIRU1BLm9mZmVyX2Jsb2Nrcyk7XG4gIGRiLnJ1bihTQ0hFTUEuc2V0dGxlbWVudF9yZWNvcmRzKTtcbiAgZGIucnVuKFNDSEVNQS5ldmVudHNfaW5kZXgpO1xuICBkYi5ydW4oU0NIRU1BLmV2ZW50c19tZXNzYWdlX2luZGV4KTtcbiAgZGIucnVuKFNDSEVNQS5ibG9ja3Nfb2ZmZXJfaW5kZXgpO1xuICBkYi5ydW4oU0NIRU1BLmJsb2Nrc19zdGF0dXNfaW5kZXgpO1xuICBkYi5ydW4oU0NIRU1BLnNldHRsZW1lbnRfdHJhZGVfaW5kZXgpO1xufVxuIl19