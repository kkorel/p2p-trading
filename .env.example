# ===========================================
# P2P Energy Trading Platform - Configuration
# ===========================================
# Copy this file to .env and fill in the values

# ===========================================
# Environment Mode
# ===========================================
NODE_ENV=development
# Set to 'production' for production deployment
# DEV_MODE enables demo endpoints and debug features
DEV_MODE=true

# ===========================================
# Database (PostgreSQL)
# ===========================================
DATABASE_URL=postgresql://p2p_user:p2p_password@localhost:5432/p2p_trading
# For production, use a secure password and consider using connection pooling

# ===========================================
# Redis (for caching and session management)
# ===========================================
REDIS_URL=redis://localhost:6379

# ===========================================
# Service Ports
# ===========================================
BAP_PORT=4000
CDS_PORT=4001
WEB_PORT=3000

# ===========================================
# Service URLs (update for production)
# ===========================================
BAP_URL=http://localhost:4000
CDS_URL=http://localhost:4001
BPP_URL=http://localhost:4000

# ===========================================
# Beckn Network Identity
# ===========================================
# BAP (Buyer Application Platform)
BAP_ID=bap.p2p-trading.local
BAP_URI=http://localhost:4000

# BPP (Provider Platform - same as BAP in prosumer model)
BPP_ID=bpp.p2p-trading.local
BPP_URI=http://localhost:4000

# CDS (Catalog Discovery Service)
CDS_ID=cds.p2p-trading.local
CDS_URI=http://localhost:4001

# ===========================================
# Authentication
# ===========================================
# Google OAuth - Get credentials from Google Cloud Console
# https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# Session Configuration
SESSION_EXPIRY_DAYS=7
SESSION_SECRET=your-secure-session-secret-min-32-chars

# ===========================================
# AI/LLM Integration (Meter PDF Analysis)
# ===========================================
# OpenRouter API - Get your key at https://openrouter.ai/keys
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=meta-llama/llama-3.2-3b-instruct:free

# ===========================================
# Matching Algorithm Configuration
# ===========================================
# Weights must sum to 1.0
MATCH_WEIGHT_PRICE=0.40
MATCH_WEIGHT_TRUST=0.35
MATCH_WEIGHT_TIME=0.25

# ===========================================
# Trust Score System
# ===========================================
MIN_TRUST_THRESHOLD=0.2
DEFAULT_TRUST_SCORE=0.3
TRUST_DEFAULT_LIMIT=10
TRUST_SUCCESS_BONUS=0.02
TRUST_FAILURE_PENALTY=0.10
TRUST_METER_BONUS=0.10

# ===========================================
# DISCOM Mock Configuration
# ===========================================
# Rate per kWh in INR
DISCOM_RATE_PER_KWH=10
# How often to check for completed orders (ms)
DISCOM_CHECK_INTERVAL_MS=60000
# Probability of successful delivery (0-1)
DISCOM_SUCCESS_RATE=0.85

# ===========================================
# Order & Cancellation Settings
# ===========================================
# Minutes before delivery start when cancellation is no longer allowed
CANCEL_WINDOW_MINUTES=30
# Default escrow duration in seconds
ESCROW_DURATION_SEC=1800

# ===========================================
# Callback Configuration
# ===========================================
# Delay for async callbacks (ms) - simulates network latency
CALLBACK_DELAY=100

# ===========================================
# Platform Fees
# ===========================================
# Platform fee percentage (2.5% = 0.025)
PLATFORM_FEE_RATE=0.025
# Cancellation penalty percentage (10% = 0.10)
CANCELLATION_PENALTY_RATE=0.10

# ===========================================
# Frontend Configuration (Next.js)
# ===========================================
NEXT_PUBLIC_API_URL=http://localhost:4000
NEXT_PUBLIC_APP_NAME=P2P Energy Trading
